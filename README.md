# SberAPI

## Разворачиваем на родной машине
  ###  Требования
    Должна быть установлена база данных H2
    Установлена JDK не ниже 8 версии
    
  ### Установка и запуск
    
    1) git clone 
    2) (опционально собрать и запустить тесты) mvn package
    3) cp BankTask.mv.db ~/BankTask.mv.db
    4) java -jar BankProject-1.0-SNAPSHOT.jar
    
    Параметры подключения к БД:
      host: localhost
      port: 9092
      user: sa
    Используется H2 Database, самому поднимать ее не нужно, она поднимется
    при старте приложения или запуске тестов!

  ### Использование
    После того как сервер поднялся идем на http://localhost:8080/service/bank/v1/documentation
    На этой странице есть документация OpenApi и можно протестировать все запросы
    Для использования методов API сначала получаем токен:
        1) Если смотрим через swagger идем сначала в auth-controller
        2) Отправляем POST-запрос на /service/bank/v1/auth,
            параметры для основных методов: name = user, pass = 1111
            параметры для методов контрагента: name = admin, pass = 2222
        Получаем в ответ токен
        Время жизни токена составляет 2 часа
        3) На любой запрос отправляем в хедере Authorization полученный токен
            Пример: "Authorization: Bearer token_value"
            На странице с документацией swagger есть зеленая кнопка Authorize,
            вводим туда: Bearer token_value
            После этого можно тестировать все методы.
            Для использования методов контрагента нужно получить другой токен

## Разворачиваем в докере
    
    1) docker build -t bank_api_img . 
    2) docker run -it -p 8080:8080  -p 9092:9092 bank_api_img



  

